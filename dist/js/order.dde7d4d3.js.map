{"version":3,"sources":["webpack:///./src/views/GoldOrder.vue?1241","webpack:///./src/service/goldorder.js","webpack:///src/views/GoldOrder.vue","webpack:///./src/views/GoldOrder.vue?d2b2","webpack:///./src/views/GoldOrder.vue","webpack:///./src/views/GoldOrder.vue?2e83"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","onChangeTab","model","value","callback","$$v","status","expression","onRefresh","refreshing","finished","onLoad","$event","loading","_l","item","index","key","billType","_v","_s","billNumber","detail","goodsName","prefix","goodsCoverImg","slot","buyingPoint","ops","goldPrice","silverPrice","Number","toFixed","_e","createTime","billStatus","billId","btnChangeStutas","goodId","btnToDetail","staticRenderFns","GetMybills","axios","get","UpdateBill","params","post","list","page","computed","components","sHeader","clearInterval","timer","methods","res","data","au","id","flag","some","i","splice","getMybills","then","push","ls","length","reverse","concat","totalPage","name","title","$router","go","component"],"mappings":"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","file":"js/order.dde7d4d3.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"order-box\"},[_c('s-header',{attrs:{\"name\":'order in advance history order',\"back\":'/user'}}),_c('van-tabs',{staticClass:\"order-tab\",attrs:{\"color\":'#1baeae',\"title-active-color\":'#1baeae'},on:{\"change\":_vm.onChangeTab},model:{value:(_vm.status),callback:function ($$v) {_vm.status=$$v},expression:\"status\"}},[_c('van-tab',{attrs:{\"title\":\"Orders in the reservation\",\"name\":\"0\"}}),_c('van-tab',{attrs:{\"title\":\"Historical order\",\"name\":\"1\"}})],1),_c('van-pull-refresh',{staticClass:\"order-list-refresh\",on:{\"refresh\":_vm.onRefresh},model:{value:(_vm.refreshing),callback:function ($$v) {_vm.refreshing=$$v},expression:\"refreshing\"}},[_c('van-list',{attrs:{\"finished\":_vm.finished,\"finished-text\":\"No more\"},on:{\"load\":_vm.onLoad,\"offset\":function($event){300}},model:{value:(_vm.loading),callback:function ($$v) {_vm.loading=$$v},expression:\"loading\"}},_vm._l((_vm.list),function(item,index){return _c('div',{key:index,staticClass:\"order-item-box\"},[_c('div',{staticClass:\"order-item-header\"},[(item.billType==0)?_c('span',[_vm._v(\"Buy back:\")]):_c('span',[_vm._v(\"Buy booking:\")]),_c('span',[_vm._v(\" Order No. \"),_c('span',[_vm._v(_vm._s(item.billNumber))])])]),_c('van-card',{attrs:{\"title\":item.detail.goodsName,\"thumb\":_vm.prefix(item.detail.goodsCoverImg)}},[_c('div',{staticClass:\"quan\",attrs:{\"slot\":\"desc\"},slot:\"desc\"},[(item.buyingPoint>1000)?_c('span',{staticClass:\"item\"},[_vm._v(\"10gm\")]):_c('span',{staticClass:\"item\"},[_vm._v(\"500gm\")]),_c('span',{staticClass:\"item\"},[_vm._v(\"Quantity:\"+_vm._s(item.ops))])]),_c('div',{staticClass:\"item-price\",attrs:{\"slot\":\"price\"},slot:\"price\"},[_c('div',{staticClass:\"price-buy\"},[_vm._v(\" ₹\"+_vm._s(item.buyingPoint)+\"/ \"),(item.buyingPoint>2000)?_c('span',[_vm._v(\"₹\"+_vm._s(_vm.goldPrice))]):_c('span',[_vm._v(\"₹\"+_vm._s(_vm.silverPrice))])]),_c('div',{staticClass:\"price-now\"},[_vm._v(\" Current different value: \"),(item.billType==0&&item.buyingPoint>2000)?_c('span',[_vm._v(_vm._s(((Number(_vm.goldPrice)-Number(item.buyingPoint))*10*item.ops).toFixed(2)))]):_vm._e(),(item.billType==0&&item.buyingPoint<2000)?_c('span',[_vm._v(_vm._s(((Number(_vm.silverPrice)-Number(item.buyingPoint))*500*item.ops).toFixed(2)))]):_vm._e(),(item.billType==1&&item.buyingPoint>2000)?_c('span',[_vm._v(_vm._s(((Number(item.buyingPoint)-Number(_vm.goldPrice))*10*item.ops).toFixed(2)))]):_vm._e(),(item.billType==1&&item.buyingPoint<2000)?_c('span',[_vm._v(_vm._s(((Number(item.buyingPoint)-Number(_vm.silverPrice))*500*item.ops).toFixed(2)))]):_vm._e()]),_c('div',{staticClass:\"price-now\"},[_vm._v(\" Created time: \"),_c('span',[_vm._v(_vm._s(item.createTime))])])])]),_c('div',{staticClass:\"buy-again\"},[_c('div',{staticClass:\"again-left\"},[_c('span',[_vm._v(\"Pre-payment:₹\"+_vm._s(item.ops*300))]),_c('span',[_vm._v(\"(including serve fee)\")])]),(_vm.billStatus==0)?_c('div',{staticClass:\"again-right\"},[_c('span',{attrs:{\"data-status\":item.billId},on:{\"click\":function($event){return _vm.btnChangeStutas(item.billId,item.billStatus,index,item.buyingPoint,item.goodId)}}},[_vm._v(\"End order\")])]):_c('div',{staticClass:\"again-right\"},[_c('span',{attrs:{\"data-status\":item.billId},on:{\"click\":function($event){return _vm.btnToDetail(item.goodId)}}},[_vm._v(\"Buy again\")])])])],1)}),0)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import axios from '../utils/axios'\r\nimport {baseApi} from '../utils/api'\r\n// 获取我的账单列表\r\nexport function GetMybills() {\r\n  return axios.get(`/bill-api/v1/GetMybills`); //${baseApi}\r\n}\r\n\r\n//修改账单状态\r\nexport function   UpdateBill(params) {\r\n  return axios.post(`/bill-api/v1/update`,params); //${baseApi}\r\n}","<!--\r\n * 严肃声明：\r\n * 开源版本请务必保留此注释头信息，若删除我方将保留所有法律责任追究！\r\n * 本系统已申请软件著作权，受国家版权局知识产权以及国家计算机软件著作权保护！\r\n * 可正常分享和学习源码，不得用于违法犯罪活动，违者必究！\r\n * Copyright (c) 2020 陈尼克 all rights reserved.\r\n * 版权所有，侵权必究！\r\n *\r\n-->\r\n\r\n<template>\r\n  <div class=\"order-box\">\r\n    <s-header :name=\"'order in advance history order'\" :back=\"'/user'\"></s-header>\r\n    <van-tabs\r\n      @change=\"onChangeTab\"\r\n      :color=\"'#1baeae'\"\r\n      :title-active-color=\"'#1baeae'\"\r\n      class=\"order-tab\"\r\n      v-model=\"status\"\r\n    >\r\n      <van-tab title=\"Orders in the reservation\" name=\"0\"></van-tab>\r\n      <van-tab title=\"Historical order\" name=\"1\"></van-tab>\r\n    </van-tabs>\r\n    <van-pull-refresh v-model=\"refreshing\" @refresh=\"onRefresh\" class=\"order-list-refresh\">\r\n      <van-list\r\n        v-model=\"loading\"\r\n        :finished=\"finished\"\r\n        finished-text=\"No more\"\r\n        @load=\"onLoad\"\r\n        @offset=\"300\"\r\n      >\r\n        <div v-for=\"(item, index) in list\" :key=\"index\" class=\"order-item-box\">\r\n          <!-- @click=\"goTo(item.orderNo)\" -->\r\n          <div class=\"order-item-header\">\r\n            <span v-if=\"item.billType==0\">Buy back:</span>\r\n            <span v-else>Buy booking:</span>\r\n            <span>\r\n              Order No.\r\n              <span>{{item.billNumber}}</span>\r\n            </span>\r\n          </div>\r\n          <!-- v-for=\"one in item.detail\" -->\r\n          <!-- :key=\"one\" -->\r\n          <van-card :title=\"item.detail.goodsName\" :thumb=\"prefix(item.detail.goodsCoverImg)\">\r\n            <div slot=\"desc\" class=\"quan\">\r\n              <span class=\"item\" v-if=\"item.buyingPoint>1000\">10gm</span>\r\n              <span class=\"item\" v-else>500gm</span>\r\n              <span class=\"item\">Quantity:{{item.ops}}</span>\r\n            </div>\r\n            <div slot=\"price\" class=\"item-price\">\r\n              <div class=\"price-buy\">\r\n                ₹{{item.buyingPoint}}/\r\n                <span v-if=\"item.buyingPoint>2000\">₹{{goldPrice}}</span>\r\n                <span v-else>₹{{silverPrice}}</span>\r\n              </div>\r\n              <div class=\"price-now\">\r\n                Current different value:\r\n                <span v-if=\"item.billType==0&&item.buyingPoint>2000\">{{((Number(goldPrice)-Number(item.buyingPoint))*10*item.ops).toFixed(2)}}</span>\r\n                <span v-if=\"item.billType==0&&item.buyingPoint<2000\">{{((Number(silverPrice)-Number(item.buyingPoint))*500*item.ops).toFixed(2)}}</span>\r\n                <span v-if=\"item.billType==1&&item.buyingPoint>2000\">{{((Number(item.buyingPoint)-Number(goldPrice))*10*item.ops).toFixed(2)}}</span>\r\n                <span v-if=\"item.billType==1&&item.buyingPoint<2000\">{{((Number(item.buyingPoint)-Number(silverPrice))*500*item.ops).toFixed(2)}}</span>\r\n                <!-- <span>{{item.buyingPoint-goldPrice}}</span> -->\r\n              </div>\r\n              <div class=\"price-now\">\r\n                Created time:\r\n                <span>{{item.createTime}}</span>\r\n              </div>\r\n            </div>\r\n          </van-card>\r\n          <div class=\"buy-again\">\r\n            <div class=\"again-left\">\r\n              <span>Pre-payment:₹{{item.ops*300}}</span>\r\n              <span>(including serve fee)</span>\r\n            </div>\r\n            <div class=\"again-right\" v-if=\"billStatus==0\">\r\n              <span\r\n                :data-status=\"item.billId\"\r\n                @click=\"btnChangeStutas(item.billId,item.billStatus,index,item.buyingPoint,item.goodId)\"\r\n              >End order</span>\r\n            </div>\r\n            <div class=\"again-right\" v-else>\r\n              <span\r\n                :data-status=\"item.billId\"\r\n                @click=\"btnToDetail(item.goodId)\"\r\n              >Buy again</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </van-list>\r\n    </van-pull-refresh>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport sHeader from \"@/components/SimpleHeader\";\r\nimport { getOrderList } from \"../service/order\";\r\nimport { prefix } from \"@/common/js/utils\";\r\nimport { GetMybills, UpdateBill } from \"../service/goldorder\";\r\nimport { getDetail } from \"../service/good\";\r\nimport {getgold} from '../service/golddetail'\r\nimport { Toast } from \"vant\";\r\n\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      status: \"\",\r\n      billStatus: 0,\r\n      loading: false,\r\n      finished: false,\r\n      refreshing: false,\r\n      list: [],\r\n      page: 1,\r\n      goldPrice:0,\r\n      silverPrice:0\r\n    };\r\n  },\r\n  computed: {\r\n\r\n    // shou() {\r\n    //   return `10gm  Quanity:5`;\r\n    // }\r\n  },\r\n  components: {\r\n    sHeader\r\n  },\r\n  async mounted() {\r\n    // this.loadData()\r\n    // this.getMybills();\r\n      this.timer =\r\n    setInterval(this.getGold,3000)\r\n  },\r\n   beforeDestroy() {\r\n    clearInterval(this.timer)\r\n  },\r\n  methods: {\r\n       getGold(){\r\n      getgold().then(res=>{\r\n        // console.log(res.data);\r\n          if(res.data.ag!=undefined &&res.data.au!=undefined){\r\n          this.goldPrice = res.data.au;\r\n           this.silverPrice = res.data.ag;\r\n        }\r\n      }).catch(err=>{\r\n        // console.log(err);\r\n        // if(err.BM_HQ_AU!=undefined &&err.BM_HQ_AG!=undefined){\r\n        //   this.goldList[0].price = err.BM_HQ_AU;\r\n        //    this.goldList[1].price = err.BM_HQ_AG;\r\n        // }\r\n      })\r\n    },\r\n    delete(id) {\r\n      //根据id找出索引，\r\n      //如果找到索引直接调用数组splice方法\r\n      let flag = false;\r\n      this.list.some((item, i) => {\r\n        if (i == id) {\r\n          flag = true;\r\n          this.list.splice(i, 1);\r\n          return true;\r\n        }\r\n      });\r\n      return flag;\r\n    },\r\n    btnToDetail(id){\r\n   if(id==10893){\r\n          this.$router.push({ path: `Gold/${id}` })\r\n      }else{\r\n         this.$router.push({ path: `Sliver/${id}` })\r\n      }\r\n    },\r\n    btnChangeStutas(billId, billStatus, index,buyingPoint) {\r\n      // console.log(\"index\", index);\r\n      //  console.log(billId,billStatus);\r\n      if (billStatus == 0) {\r\n        if(buyingPoint>2000&&this.goldPrice!=0){\r\n         UpdateBill({\r\n          billId: billId,\r\n          billStatus: 1,\r\n          unwindingPoint: this.goldPrice\r\n        }).then(res => {\r\n          //  console.log(res);\r\n\r\n          let flag = this.delete(index);\r\n          if (flag) {\r\n            Toast.success(\"Cancel Success\");\r\n          } else {\r\n            Toast.fail(\"Cancel Fail\");\r\n          }\r\n        });\r\n        }else if(buyingPoint<1000&&this.silverPrice!=0){\r\n              UpdateBill({\r\n          billId: billId,\r\n          billStatus: 1,\r\n          unwindingPoint: this.silverPrice\r\n        }).then(res => {\r\n          //  console.log(res);\r\n\r\n          let flag = this.delete(index);\r\n          if (flag) {\r\n            Toast.success(\"Cancel Success\");\r\n          } else {\r\n            Toast.fail(\"Cancel Fail\");\r\n          }\r\n        });\r\n        }\r\n      }\r\n    },\r\n    btnclick(id) {\r\n      this.billStatus = id;\r\n      this.getMybills();\r\n    },\r\n    async getMybills() {\r\n      GetMybills().then(res=>{\r\n      // console.log(\"res\",res);\r\n      let lists = res.data;\r\n      let list = [];\r\n      let ls = [];\r\n      lists.forEach(element => {\r\n        // console.log(\"index\",element);\r\n        if (element.billStatus == this.billStatus) {\r\n          ls.push(element);\r\n        }\r\n      });\r\n      ls.forEach((item, index) => {\r\n        getDetail(item.goodId)\r\n          .then(res => {\r\n            // console.log(\"index\",res);\r\n            item.detail = res.data;\r\n            list.push(item);\r\n            // console.log(lists.length-1,index);\r\n            if (ls.length - 1 == index) {\r\n              list.reverse();\r\n              this.list = list;\r\n              // console.log(\"list\",this.list);\r\n            }\r\n          })\r\n          .catch(err => {\r\n            // console.log(\"element\",index,err);\r\n          });\r\n      });\r\n\r\n      this.loading = false;\r\n      this.finished = true;\r\n\r\n      // console.log(\"list\", this.list);\r\n      }).catch(err=>{\r\n         this.loading = false;\r\n         this.finished = true;\r\n      });\r\n     \r\n    },\r\n\r\n    async loadData() {\r\n      const {\r\n        data,\r\n        data: { list }\r\n      } = await getOrderList({ pageNumber: this.page, status: this.status });\r\n      this.list = this.list.concat(list);\r\n      this.totalPage = data.totalPage;\r\n      this.loading = false;\r\n      if (this.page >= data.totalPage) this.finished = true;\r\n    },\r\n    onChangeTab(name, title) {\r\n      this.billStatus = name;\r\n      //  this.getMybills();\r\n      this.onRefresh();\r\n    },\r\n    goTo(id) {\r\n      this.$router.push({ path: `order-detail?id=${id}` });\r\n    },\r\n    goBack() {\r\n      this.$router.go(-1);\r\n    },\r\n    onLoad() {\r\n      // if (!this.refreshing && this.page < this.totalPage) {\r\n      //   this.page = this.page + 1;\r\n      // }\r\n      if (this.refreshing) {\r\n        // console.log(\"refresh\");\r\n        this.list = [];\r\n        this.refreshing = false;\r\n      }\r\n      this.getMybills();\r\n      // this.loadData();\r\n    },\r\n    onRefresh() {\r\n      this.refreshing = true;\r\n      this.finished = false;\r\n      this.loading = true;\r\n      this.page = 1;\r\n      this.onLoad();\r\n      // this.getMybills();\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n@import \"../common/style/mixin\";\r\n.order-box {\r\n  .order-header {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    z-index: 10000;\r\n    .fj();\r\n    .wh(100%, 44px);\r\n    line-height: 44px;\r\n    padding: 0 10px;\r\n    .boxSizing();\r\n    color: #252525;\r\n    background: #fff;\r\n    border-bottom: 1px solid #dcdcdc;\r\n    .order-name {\r\n      font-size: 14px;\r\n    }\r\n  }\r\n  .order-tab {\r\n    margin-top: 44px;\r\n    position: fixed;\r\n    left: 0;\r\n    z-index: 1000;\r\n    width: 100%;\r\n  }\r\n  .order-list-refresh {\r\n    margin-top: 68px;\r\n    .van-card__content {\r\n      display: flex;\r\n      flex-direction: column;\r\n      justify-content: center;\r\n      .quan {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        padding-right: 10%;\r\n        padding-bottom: 10px;\r\n        padding-top: 10px;\r\n      }\r\n      .item-price {\r\n        display: flex;\r\n        flex-direction: column;\r\n        color: #666;\r\n        .price-buy {\r\n          span {\r\n            color: #659759;\r\n          }\r\n        }\r\n        .price-now {\r\n          span {\r\n            color: #659759;\r\n          }\r\n        }\r\n      }\r\n      .van-card__title {\r\n        font-weight: 600;\r\n        font-size: 14px;\r\n      }\r\n    }\r\n    .van-pull-refresh__head {\r\n      background: #f9f9f9;\r\n    }\r\n    .van-list {\r\n      min-height: calc(100vh - 88px);\r\n      background: #f9f9f9;\r\n      margin-top: 20px;\r\n    }\r\n    .order-item-box {\r\n      margin: 20px 10px;\r\n      background-color: #fff;\r\n      .order-item-header {\r\n        padding: 10px 10px 10px 10px;\r\n        display: flex;\r\n        font-weight: 600;\r\n        border-bottom: 0.5px solid #dddddd;\r\n        justify-content: space-between;\r\n        span {\r\n          span {\r\n            font-weight: 400;\r\n          }\r\n        }\r\n      }\r\n      .van-card {\r\n        background-color: #fff;\r\n        margin-top: 0;\r\n      }\r\n      .buy-again {\r\n        line-height: 24px;\r\n        border-top: 0.5px solid #dddddd;\r\n        display: flex;\r\n        .again-left {\r\n          display: flex;\r\n          flex: 3;\r\n          flex-direction: column;\r\n          span:nth-child(2) {\r\n            color: #8a8a8a;\r\n          }\r\n        }\r\n        .again-right {\r\n          flex: 1;\r\n          span {\r\n            display: inline-block;\r\n            line-height: 30px;\r\n            padding: 0 10px;\r\n            margin: 9px 0;\r\n            border-radius: 10px;\r\n            background-color: #f2f2f2;\r\n            font-weight: 600;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GoldOrder.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GoldOrder.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./GoldOrder.vue?vue&type=template&id=7526f1fa&scoped=true&\"\nimport script from \"./GoldOrder.vue?vue&type=script&lang=js&\"\nexport * from \"./GoldOrder.vue?vue&type=script&lang=js&\"\nimport style0 from \"./GoldOrder.vue?vue&type=style&index=0&id=7526f1fa&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7526f1fa\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GoldOrder.vue?vue&type=style&index=0&id=7526f1fa&lang=less&scoped=true&\""],"sourceRoot":""}