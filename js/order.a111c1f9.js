(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["order"],{"26e9":function(t,e,a){"use strict";var n=a("23e7"),s=a("e8b5"),i=[].reverse,r=[1,2];n({target:"Array",proto:!0,forced:String(r)===String(r.reverse())},{reverse:function(){return s(this)&&(this.length=this.length),i.call(this)}})},"3aa2":function(t,e,a){},"45fc":function(t,e,a){"use strict";var n=a("23e7"),s=a("b727").some,i=a("a640"),r=i("some");n({target:"Array",proto:!0,forced:!r},{some:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})},"49c8":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"order-box"},[a("s-header",{attrs:{name:"order in advance history order",back:"/user"}}),a("van-tabs",{staticClass:"order-tab",attrs:{color:"#1baeae","title-active-color":"#1baeae"},on:{change:t.onChangeTab},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},[a("van-tab",{attrs:{title:"Orders in the reservation",name:"0"}}),a("van-tab",{attrs:{title:"Historical order",name:"1"}})],1),a("van-pull-refresh",{staticClass:"order-list-refresh",on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[a("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad,offset:function(t){}},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(e,n){return a("div",{key:n,staticClass:"order-item-box"},[a("div",{staticClass:"order-item-header"},[a("span",[t._v("Buy back:")]),a("span",[t._v(" Order No. "),a("span",[t._v("2202556545652685565")])])]),a("van-card",{attrs:{title:e.detail.goodsName,thumb:t.prefix(e.detail.goodsCoverImg)}},[a("div",{staticClass:"quan",attrs:{slot:"desc"},slot:"desc"},[a("span",{staticClass:"item"},[t._v("10gm")]),a("span",{staticClass:"item"},[t._v("Quantity:"+t._s(e.ops))])]),a("div",{staticClass:"item-price",attrs:{slot:"price"},slot:"price"},[a("div",{staticClass:"price-buy"},[t._v(" ₹546556.33/ "),a("span",[t._v("₹4640.940")])]),a("div",{staticClass:"price-now"},[t._v(" Current different value: "),a("span",[t._v("640.940")])]),a("div",{staticClass:"price-now"},[t._v(" Canceled time: "),a("span",[t._v(t._s(e.createTime))])])])]),a("div",{staticClass:"buy-again"},[a("div",{staticClass:"again-left"},[a("span",[t._v("Pre-payment₹1500")]),a("span",[t._v("(including serve fee)")])]),0==t.billStatus?a("div",{staticClass:"again-right"},[a("span",{attrs:{"data-status":e.billId},on:{click:function(a){return t.btnChangeStutas(e.billId,e.billStatus,n)}}},[t._v("End order")])]):a("div",{staticClass:"again-right"},[a("span",{attrs:{"data-status":e.billId},on:{click:function(a){return t.btnChangeStutas(e.billId,e.billStatus)}}},[t._v("Buy again")])])])],1)})),0)],1)],1)},s=[],i=(a("e7e5"),a("d399")),r=a("1da1"),o=(a("45fc"),a("a434"),a("4160"),a("159b"),a("26e9"),a("99af"),a("96cf"),a("0eaf")),c=a("99c5"),l=(a("495f"),a("a27e"));a("7c15");function u(){return l["a"].get("/bill-api/v1/GetMybills")}function d(t){return l["a"].post("/bill-api/v1/update",t)}var f=a("360d"),h={data:function(){return{status:"",billStatus:0,loading:!1,finished:!1,refreshing:!1,list:[],page:1}},computed:{},components:{sHeader:o["a"]},mounted:function(){return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},methods:{delete:function(t){var e=this,a=!1;return this.list.some((function(n,s){if(s==t)return a=!0,e.list.splice(s,1),!0})),a},btnChangeStutas:function(t,e,a){var n=this;console.log("index",a),0==e&&d({billId:t,billStatus:1,unwindingPoint:"3200"}).then((function(t){var e=n["delete"](a);e?i["a"].success("Cancel Success"):i["a"].fail("Cancel Fail")}))},btnclick:function(t){this.billStatus=t,this.getMybills()},getMybills:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,n,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u();case 2:a=e.sent,n=a.data,s=[],i=[],n.forEach((function(e){e.billStatus==t.billStatus&&i.push(e)})),i.forEach((function(e,a){Object(f["b"])(e.goodId).then((function(n){e.detail=n.data,s.push(e),i.length-1==a&&(s.reverse(),t.list=s)}))["catch"]((function(t){}))})),t.loading=!1,t.finished=!0,console.log("list",t.list);case 11:case"end":return e.stop()}}),e)})))()},loadData:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["e"])({pageNumber:t.page,status:t.status});case 2:a=e.sent,n=a.data,s=a.data.list,t.list=t.list.concat(s),t.totalPage=n.totalPage,t.loading=!1,t.page>=n.totalPage&&(t.finished=!0);case 9:case"end":return e.stop()}}),e)})))()},onChangeTab:function(t,e){this.billStatus=t,this.onRefresh()},goTo:function(t){this.$router.push({path:"order-detail?id=".concat(t)})},goBack:function(){this.$router.go(-1)},onLoad:function(){this.refreshing&&(this.list=[],this.refreshing=!1),this.getMybills()},onRefresh:function(){this.refreshing=!0,this.finished=!1,this.loading=!0,this.page=1,this.onLoad()}}},g=h,v=(a("a512"),a("2877")),p=Object(v["a"])(g,n,s,!1,null,"71f0af6c",null);e["default"]=p.exports},"7c15":function(t,e,a){"use strict"},a512:function(t,e,a){"use strict";a("3aa2")}}]);
//# sourceMappingURL=order.a111c1f9.js.map